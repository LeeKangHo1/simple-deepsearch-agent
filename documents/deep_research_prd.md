# ðŸ“„ Product Requirements Document (PRD)

## ðŸ’¡ í”„ë¡œì íŠ¸ëª…: ë”¥ ë¦¬ì„œì¹˜ ì±—ë´‡ (Deep Research Chatbot)

---

## 1. ê°œìš” (Overview)

deep research chatbotì€ LangChain, LangGraph, LangSmith ê¸°ë°˜ì˜ ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ, ì‚¬ìš©ìžì˜ ì§ˆë¬¸ì— ëŒ€í•´ ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ì‹¬ì¸µì ìœ¼ë¡œ ì¡°ì‚¬í•œ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê²€ìƒ‰ì—”ì§„ ë³‘ë ¬ í™œìš©ê³¼ ë¬¸ì„œ ìš”ì•½, ì¶œì²˜ ê¸°ë°˜ ì‘ë‹µì„ í†µí•´ ì‹ ë¢°ë„ ë†’ì€ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, **ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìžë™ ìž¬ê²€ìƒ‰ ê¸°ëŠ¥**ì„ í†µí•´ í’ˆì§ˆì„ ë³´ìž¥í•©ë‹ˆë‹¤. Streamlit UIë¡œ ë‹¨ìˆœí•˜ê³  ëª…ë£Œí•˜ê²Œ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

---

## 2. ì‚¬ìš©ìž ì •ì˜ (Target User)

- ì •ë³´ íƒìƒ‰ì˜ ê¹Šì´ë¥¼ ì›í•˜ëŠ” **ë¹„ì „ë¬¸ ì¼ë°˜ì¸ \~ ì¤€ì—°êµ¬ìž**
  - ì˜ˆ: ê¸°íšìž, ëŒ€í•™ìƒ, ìž‘ê°€, ìŠ¤íƒ€íŠ¸ì—… ì°½ì—…ìž ë“±
- ë°°ê²½ì§€ì‹ì€ ìžˆìœ¼ë‚˜ ë…¼ë¬¸ ê²€ìƒ‰ì´ë‚˜ ì „ë¬¸ DBëŠ” ë¶€ë‹´ìŠ¤ëŸ¬ìš´ ì‚¬ìš©ìžì¸µ
- ChatGPTì™€ ê°™ì€ ëŒ€í™”í˜• ì¸í„°íŽ˜ì´ìŠ¤ì— ìµìˆ™í•œ ì‚¬ìš©ìž

---

## 3. í•µì‹¬ ê¸°ëŠ¥ (Key Features)

### 3.1 ì§ˆë¬¸ í™•ìž¥ â†’ ë‹¤ì¤‘ ì¿¼ë¦¬ ìƒì„±

- ì‚¬ìš©ìž ìž…ë ¥(ì§ˆë¬¸ ë˜ëŠ” í‚¤ì›Œë“œ)ì„ ë¶„ì„í•˜ì—¬ í•˜ìœ„ ì§ˆë¬¸(sub-queries) ìžë™ ìƒì„±
- LangChain ê¸°ë°˜ Prompt Template ë˜ëŠ” LLMì„ ì´ìš©í•œ í™•ìž¥

### 3.2 ë³‘ë ¬ ì›¹ ê²€ìƒ‰ + ë²¡í„° DB ì €ìž¥ (DuckDuckGo + Tavily + Chroma)

- ìƒì„±ëœ ì„œë¸Œ ì¿¼ë¦¬ë¥¼ Tavilyì™€ DuckDuckGoì—ì„œ ë³‘ë ¬ ê²€ìƒ‰
- ë‰´ìŠ¤ ë° ë¸”ë¡œê·¸ ê¸°ë°˜ ìš°ì„  ìˆ˜ì§‘, ë…¼ë¬¸ ë° ë¦¬í¬íŠ¸ëŠ” ì„ íƒì ìœ¼ë¡œ í™œìš©
- **ìˆ˜ì§‘ëœ ë¬¸ì„œë“¤ì„ ìž„ë² ë”©í•˜ì—¬ Chroma ë²¡í„° DBì— ì €ìž¥**
- **ìž„ë² ë”© ìœ ì‚¬ë„ë¥¼ í™œìš©í•œ ì§€ëŠ¥ì  ì¤‘ë³µ ì œê±°** (URL + ë‚´ìš© ìœ ì‚¬ë„ ê¸°ë°˜)
- **ì‚¬ìš©ìž ì§ˆë¬¸ê³¼ì˜ ì˜ë¯¸ì  ìœ ì‚¬ë„ë¡œ ê´€ë ¨ì„± ë†’ì€ ë¬¸ì„œ ìš°ì„  ì •ë ¬**

### 3.3 ë¬¸ì„œ ìš”ì•½ + ì¶œì²˜ í¬í•¨ ì‘ë‹µ ìƒì„±

- ìˆ˜ì§‘ëœ ë¬¸ì„œë¥¼ ë©€í‹° ë¬¸ì„œ ìš”ì•½
- ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”ëœ ì‘ë‹µ ìƒì„±
- ê° ë¬¸ìž¥ ì˜†ì— ì¶œì²˜ ì¸ë¼ì¸ í‘œê¸°

### 3.4 **ìŠ¤ë§ˆíŠ¸ ê²€ì¦ ë° ìž¬ê²€ìƒ‰ ì‹œìŠ¤í…œ (í•µì‹¬ ê°œì„ ì‚¬í•­)**

- ì‘ë‹µ ìƒì„± í›„ ê²€ì¦ ì—ì´ì „íŠ¸ê°€ ë…¼ë¦¬ì  ì˜¤ë¥˜, ë¶€ì •í™•ì„±, ì¶œì²˜ ëˆ„ë½ ë“±ì„ í™•ì¸
- **ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìžë™ìœ¼ë¡œ ë‹¤ë¥¸ ê´€ì ì˜ ì¿¼ë¦¬ ìƒì„± ë° ìž¬ê²€ìƒ‰**
  - LLMì´ ê²€ì¦ í”¼ë“œë°±ì„ ë¶„ì„í•˜ì—¬ ìƒˆë¡œìš´ ê´€ì ì˜ ê²€ìƒ‰ì–´ ìƒì„±
  - ê¸°ì¡´ ê²€ìƒ‰ ê²°ê³¼ì™€ ìƒˆ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ìžë™ ë³‘í•©
  - **ìµœëŒ€ 1íšŒ ìž¬ì‹œë„ë¡œ íš¨ìœ¨ì„± ë³´ìž¥**
- ì¤‘ë³µ ì œê±° ë° í’ˆì§ˆ í–¥ìƒëœ ìµœì¢… ì‘ë‹µ ì œê³µ

### 3.5 ì§„í–‰ ìƒíƒœ ì¶œë ¥

- ê° ì—ì´ì „íŠ¸ ë‹¨ê³„ë³„ ìƒíƒœë¥¼ Streamlit UI ìƒì— í‘œì‹œ
- ìž¬ê²€ìƒ‰ ì‹œ ë³„ë„ ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
  - ì˜ˆ: ì§ˆë¬¸ ë¶„ì„ ì™„ë£Œ / ì›¹ ê²€ìƒ‰ ì¤‘ / ì¶”ê°€ ê²€ìƒ‰ ì¤‘ / ìš”ì•½ ì¤‘ / ê²€ì¦ ì¤‘ ...

---

## 4. ì‚¬ìš©ìž ì¸í„°íŽ˜ì´ìŠ¤ (UI)

- **Streamlit ê¸°ë°˜ ë‹¨ì¼ ì°½ êµ¬ì„±**

  - ìƒë‹¨: í…ìŠ¤íŠ¸ ìž…ë ¥ì°½ (ì‚¬ìš©ìžê°€ ì§ˆë¬¸ ìž…ë ¥)
  - ì¤‘ë‹¨: ì§„í–‰ ìƒíƒœ í‘œì‹œ (ì—ì´ì „íŠ¸ ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
  - í•˜ë‹¨: êµ¬ì¡°í™”ëœ ë§ˆí¬ë‹¤ìš´ ì‘ë‹µ ì¶œë ¥ (ì¶œì²˜ í¬í•¨)

- **UI í‘œì‹œ í•­ëª© ìµœì†Œí™”**

  - ì‚¬ìš©ìžê°€ ìž‘ì„±í•œ ì§ˆë¬¸
  - ì‹œìŠ¤í…œì´ ì‘ë‹µí•œ ë§ˆí¬ë‹¤ìš´ ì •ë¦¬ë³¸
  - ì§„í–‰ ìƒíƒœ ë©”ì‹œì§€ (ì˜ˆ: "ê²€ìƒ‰ ì¤‘", "ì¶”ê°€ ê²€ìƒ‰ ì¤‘", "ìš”ì•½ ì¤‘", "ì‘ë‹µ ìƒì„± ì™„ë£Œ")

- **ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ ë°°ì œ**

  - ì„¸ì…˜ ì €ìž¥, ëŒ€í™” ê¸°ë¡ ì—†ìŒ
  - ë‹¨ì¼ ìž…ë ¥ â†’ ê²°ê³¼ í™•ì¸ íë¦„ë§Œ ìœ ì§€

### ðŸ’¡ Streamlit UI ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ (ìž¬ê²€ìƒ‰ í¬í•¨)

1. ì‚¬ìš©ìžê°€ ì§ˆë¬¸ ìž…ë ¥

   - ìž…ë ¥ì°½: `ì˜¤í”ˆì†ŒìŠ¤ LLM íŠ¸ë Œë“œ ì•Œë ¤ì¤˜`

2. ì¤‘ê°„ ì§„í–‰ í‘œì‹œ (ì´ˆê¸° ê²€ìƒ‰)

   - ë©”ì‹œì§€:
     ```
     [ì§ˆë¬¸ ë¶„ì„ ì¤‘...]
     [ì›¹ ê²€ìƒ‰ ì‹¤í–‰ ì¤‘ (DuckDuckGo + Tavily)...]
     [ë¬¸ì„œ ìš”ì•½ ì¤‘...]
     [ìµœì¢… ì‘ë‹µ ìƒì„± ì¤‘...]
     [ì‘ë‹µ í’ˆì§ˆ ê²€ì¦ ì¤‘...]
     ```

3. **ìž¬ê²€ìƒ‰ ì‹œë‚˜ë¦¬ì˜¤ (ê²€ì¦ ì‹¤íŒ¨ ì‹œ)**

   - ë©”ì‹œì§€:
     ```
     [ê²€ì¦ ê²°ê³¼: ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ ë¶€ì¡±ìœ¼ë¡œ ì¶”ê°€ ê²€ìƒ‰ í•„ìš”]
     [ìƒˆë¡œìš´ ê´€ì ì˜ ê²€ìƒ‰ì–´ ìƒì„± ì¤‘...]
     [ì¶”ê°€ ê²€ìƒ‰ ì‹¤í–‰ ì¤‘: "ì˜¤í”ˆì†ŒìŠ¤ LLM ì„±ëŠ¥ ë¹„êµ", "LLM ìƒì—…ì  í™œìš©"...]
     [ê¸°ì¡´ ê²°ê³¼ì™€ ë³‘í•© ì¤‘...]
     [ìž¬ìš”ì•½ ë° ìž¬ê²€ì¦ ì¤‘...]
     ```

4. ê²°ê³¼ ì¶œë ¥

   - ì‚¬ìš©ìžì˜ ì§ˆë¬¸: `ì˜¤í”ˆì†ŒìŠ¤ LLM íŠ¸ë Œë“œ ì•Œë ¤ì¤˜`
   - ë§ˆí¬ë‹¤ìš´ ì‘ë‹µ:
     ```
     ## ì˜¤í”ˆì†ŒìŠ¤ LLM íŠ¸ë Œë“œ
     - ìµœê·¼ ê³µê°œëœ Mistral ëª¨ë¸ì€ ì„±ëŠ¥ì´ ë†’ê³  ê²½ëŸ‰í™”ë˜ì—ˆë‹¤. *(source: huggingface.co)*
     - Metaì˜ LLaMA2ëŠ” ìƒì—…ì  ì‚¬ìš©ê¹Œì§€ í—ˆìš©ë˜ë©° ì˜í–¥ë ¥ì´ í¬ë‹¤. *(source: arxiv.org)*
     - ê¸°ì—…ë“¤ì´ ì˜¤í”ˆì†ŒìŠ¤ LLMì„ ì±„íƒí•˜ëŠ” ì´ìœ ëŠ” ë¹„ìš©ë³´ë‹¤ ìœ ì—°ì„± ë•Œë¬¸ì´ë‹¤. *(source: techcrunch.com)*
     ```

---

## 5. ë©€í‹° ì—ì´ì „íŠ¸ êµ¬ì„± (Agent Architecture)

### ðŸ’¬ LLM í”„ë¡¬í”„íŠ¸ / ì‘ë‹µ êµ¬ì¡° ì˜ˆì‹œ

ì•„ëž˜ëŠ” ê° ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” LLM ìž…ë ¥ í”„ë¡¬í”„íŠ¸ì™€ ê¸°ëŒ€ ì‘ë‹µ í˜•ì‹ì˜ ì˜ˆì‹œìž…ë‹ˆë‹¤.

#### ðŸ§¾ ì§ˆë¬¸ ë¶„ì„ ì—ì´ì „íŠ¸

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ë‹¤ìŒ ì‚¬ìš©ìž ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì¡°ì‚¬ì— ë„ì›€ì´ ë  ì„¸ë¶€ ì§ˆë¬¸ì„ 3~5ê°œ ìƒì„±í•´ì¤˜:

ì§ˆë¬¸: {user_input}
```

**ì˜ˆìƒ ì‘ë‹µ:**

```json
[
  "ì˜¤í”ˆì†ŒìŠ¤ LLMì˜ ìµœì‹  íŠ¸ë Œë“œëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
  "Mistralì´ë‚˜ LLaMAì™€ ê°™ì€ ì£¼ìš” ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë¸ì€ ì–´ë–¤ íŠ¹ì§•ì´ ìžˆë‚˜ìš”?"
]
```

#### **ðŸ”„ ìž¬ê²€ìƒ‰ ì¿¼ë¦¬ ìƒì„± (ì‹ ê·œ ì¶”ê°€)**

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ì›ë³¸ ì§ˆë¬¸: {question}

ê¸°ì¡´ ê²€ìƒ‰ ì¿¼ë¦¬:
{existing_queries}

ê²€ì¦ í”¼ë“œë°±: {feedback}

ìœ„ í”¼ë“œë°±ì„ ë°”íƒ•ìœ¼ë¡œ ë¶€ì¡±í•œ ì •ë³´ë¥¼ ë³´ì™„í•  ìˆ˜ ìžˆëŠ” ìƒˆë¡œìš´ ê´€ì ì˜ ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.
```

**ì˜ˆìƒ ì‘ë‹µ:**

```json
[
  "ì˜¤í”ˆì†ŒìŠ¤ LLM ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ",
  "LLM ê¸°ì—… ë„ìž… ì‚¬ë¡€ ë¶„ì„",
  "ì˜¤í”ˆì†ŒìŠ¤ LLM ê¸°ìˆ ì  í•œê³„ì "
]
```

#### ðŸ“š ë¬¸ì„œ ìš”ì•½ ì—ì´ì „íŠ¸

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ë‹¤ìŒ ê¸°ì‚¬ ë‚´ìš©ì„ 3ì¤„ ì´ë‚´ë¡œ ìš”ì•½í•´ì¤˜:

ë¬¸ì„œ: {content}
```

#### ðŸ§  ì¸ì‚¬ì´íŠ¸ ì—ì´ì „íŠ¸

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ë‹¤ìŒ ìš”ì•½ëœ ë¬¸ì„œë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ í•µì‹¬ ì¸ì‚¬ì´íŠ¸ 3ê°€ì§€ë¥¼ ë„ì¶œí•´ì¤˜:

ìš”ì•½ ë¦¬ìŠ¤íŠ¸:
- {summary_1}
- {summary_2} ...
```

#### ðŸ§© ì‘ë‹µ ìƒì„± ì—ì´ì „íŠ¸

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ë‹¤ìŒ ì¸ì‚¬ì´íŠ¸ì™€ ë¬¸ì„œ ì¶œì²˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì‘ë‹µì„ ìƒì„±í•´ì¤˜. ê° ë¬¸ìž¥ ì˜†ì— ì¶œì²˜ë¥¼ ëª…ì‹œí•´ì¤˜:

ì¸ì‚¬ì´íŠ¸: {insights}
ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸: {documents}
```

#### **âœ… ê²€ì¦ ì—ì´ì „íŠ¸ (ê°•í™”)**

**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**

```
ë‹¤ìŒ ì‘ë‹µì„ ê²€í† í•˜ì—¬ í’ˆì§ˆì„ í‰ê°€í•´ì£¼ì„¸ìš”:

ì›ë³¸ ì§ˆë¬¸: {question}
ê²€ì¦í•  ì‘ë‹µ: {response}

ê²€ì¦ ê¸°ì¤€:
1. ì‚¬ìš©ìž ì§ˆë¬¸ì— ì ì ˆížˆ ë‹µë³€í–ˆëŠ”ê°€?
2. ë…¼ë¦¬ì  ì¼ê´€ì„±ì´ ìžˆëŠ”ê°€?
3. ì¶œì²˜ í‘œì‹œê°€ ì ì ˆížˆ ë˜ì–´ ìžˆëŠ”ê°€?
4. êµ¬ì²´ì ì¸ ì •ë³´ì™€ ë°ì´í„°ê°€ ì¶©ë¶„í•œê°€?
5. ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì´ ì˜¬ë°”ë¥¸ê°€?

ì¶œë ¥ í˜•ì‹:
{
  "is_valid": true/false,
  "feedback": "êµ¬ì²´ì ì¸ í”¼ë“œë°±",
  "missing_aspects": ["ë¶€ì¡±í•œ ê´€ì 1", "ë¶€ì¡±í•œ ê´€ì 2"]
}
```

### ðŸ§¾ ìƒíƒœ(State) êµ¬ì¡° ì •ì˜ (ì—…ë°ì´íŠ¸)

LangGraph ì „ì²´ ì›Œí¬í”Œë¡œìš°ì—ì„œ ê³µìœ ë˜ëŠ” ìƒíƒœ ê°ì²´:

```python
State = {
  "user_input": str,                  # ì‚¬ìš©ìž ìž…ë ¥ ì›ë¬¸
  "sub_queries": List[str],           # ì§ˆë¬¸ ë¶„ì„ ê²°ê³¼ ìƒì„±ëœ í•˜ìœ„ ì¿¼ë¦¬ ëª©ë¡
  "documents": List[Dict],            # ê²€ìƒ‰ ê²°ê³¼ë¡œ ìˆ˜ì§‘ëœ ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ (ë³‘í•©ë¨)
  "summaries": List[str],             # ê° ë¬¸ì„œ ìš”ì•½ ê²°ê³¼
  "insights": List[str],              # ì¸ì‚¬ì´íŠ¸ ë„ì¶œ ê²°ê³¼
  "markdown_answer": str,             # ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ì‘ë‹µ (ì¶œì²˜ í¬í•¨)
  "is_valid": bool,                   # ê²€ì¦ ê²°ê³¼ ì—¬ë¶€
  "validation_feedback": str,         # ê²€ì¦ í”¼ë“œë°± (ìž¬ê²€ìƒ‰ ë°©í–¥ ì œì‹œ)
  "retry_count": int,                 # ê²€ì¦ ì‹¤íŒ¨ë¡œ ì¸í•œ ìž¬ì‹œë„ íšŸìˆ˜ (ìµœëŒ€ 1íšŒ)
  "current_step": str,                # í˜„ìž¬ ì²˜ë¦¬ ë‹¨ê³„
  "logs": List[str],                  # ì§„í–‰ ìƒíƒœ ë¡œê¹…
  "step_timestamps": Dict[str, float] # ê° ë‹¨ê³„ë³„ ì‹œìž‘ ì‹œê°„
}
```

### ðŸ“¥ LangGraph ë…¸ë“œë³„ ìž…ë ¥/ì¶œë ¥ êµ¬ì¡° (ì—…ë°ì´íŠ¸)

| ë…¸ë“œ ì´ë¦„                | ìž…ë ¥ ë°ì´í„°                | ì¶œë ¥ ë°ì´í„°                                          | íŠ¹ì´ì‚¬í•­ |
| -------------------- | --------------------- | ----------------------------------------------- | ---- |
| `input_node`         | ì‚¬ìš©ìž ìžì—°ì–´ ì§ˆë¬¸ (str)      | ì§ˆë¬¸ (str)                                        |      |
| `question_analyzer`  | ì§ˆë¬¸ (str)              | í•˜ìœ„ ì¿¼ë¦¬ ë¦¬ìŠ¤íŠ¸ (List[str])                           |      |
| `web_search`         | í•˜ìœ„ ì¿¼ë¦¬ ë¦¬ìŠ¤íŠ¸ (List[str]) | ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ (List[Dict])                             | **ìž¬ì‹œë„ì‹œ ê¸°ì¡´+ìƒˆ ê²°ê³¼ ë³‘í•©** |
| `doc_summarizer`     | ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸                | ìš”ì•½ ë¦¬ìŠ¤íŠ¸ (List[str])                              |      |
| `insight_generator`  | ìš”ì•½ ë¦¬ìŠ¤íŠ¸                | ì¸ì‚¬ì´íŠ¸ ë¦¬ìŠ¤íŠ¸ (List[str])                            |      |
| `response_generator` | ì¸ì‚¬ì´íŠ¸ ë¦¬ìŠ¤íŠ¸, ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸      | ë§ˆí¬ë‹¤ìš´ ì‘ë‹µ (str)                                   |      |
| `response_validator` | ë§ˆí¬ë‹¤ìš´ ì‘ë‹µ              | ê²€ì¦ ê²°ê³¼ (bool), í”¼ë“œë°± (str)                        | **ìž¬ê²€ìƒ‰ ë°©í–¥ ì œì‹œ** |
| `final_output`       | ì‘ë‹µ ê²°ê³¼ (str)           | ì‚¬ìš©ìžì—ê²Œ ì¶œë ¥ë  ìµœì¢… ê²°ê³¼                                 |      |

- **ë…¸ë“œ ì •ì˜:**

  - `input_node` â†’ ì‚¬ìš©ìž ì§ˆë¬¸ ìž…ë ¥ ë…¸ë“œ
  - `question_analyzer` â†’ ì§ˆë¬¸ ë¶„ì„ ì—ì´ì „íŠ¸ ë…¸ë“œ
  - `web_search` â†’ ë³‘ë ¬ ê²€ìƒ‰ ì‹¤í–‰ ë…¸ë“œ (**ìž¬ê²€ìƒ‰ ë¡œì§ í¬í•¨**)
  - `doc_summarizer` â†’ ë¬¸ì„œ ìš”ì•½ ë…¸ë“œ
  - `insight_generator` â†’ ì¸ì‚¬ì´íŠ¸ ìƒì„± ë…¸ë“œ
  - `response_generator` â†’ ì‘ë‹µ ìƒì„± ë…¸ë“œ
  - `response_validator` â†’ ì‘ë‹µ ê²€ì¦ ë…¸ë“œ (**ê°•í™”ëœ ê²€ì¦**)
  - `final_output` â†’ ê²°ê³¼ ì¶œë ¥ ë…¸ë“œ

- **ë…¸ë“œ ì—°ê²° íë¦„ (ì—…ë°ì´íŠ¸):**

  ```
  input_node â†’ question_analyzer â†’ web_search â†’ doc_summarizer â†’ insight_generator â†’ response_generator â†’ response_validator

  response_validator â†’
      â”œâ”€â”€ final_output (if valid OR retry_count >= 1)
      â””â”€â”€ web_search (if invalid AND retry_count < 1) â† ìž¬ê²€ìƒ‰ ë£¨í”„
  ```

### ðŸ” **ì—ì´ì „íŠ¸ ê°„ ë°ì´í„° íë¦„ë„ (ì—…ë°ì´íŠ¸)**

```
[ì‚¬ìš©ìž ìž…ë ¥]
     â”‚
     â–¼
[ðŸ§¾ ì§ˆë¬¸ ë¶„ì„ ì—ì´ì „íŠ¸]
 - ìž…ë ¥ëœ ì§ˆë¬¸ì„ ë¶„ì„í•˜ì—¬ í•˜ìœ„ ì¿¼ë¦¬(ì„œë¸Œ ì§ˆë¬¸)ë“¤ì„ ìƒì„±
     â”‚
     â–¼
[ðŸŒ ì›¹ ê²€ìƒ‰ ì—ì´ì „íŠ¸] â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”
 - DuckDuckGo + Tavilyì—ì„œ ë³‘ë ¬ ê²€ìƒ‰ ìˆ˜í–‰                              â”‚
 - ê° í•˜ìœ„ ì¿¼ë¦¬ì— ëŒ€í•´ ì›¹ ê²€ìƒ‰ ê²°ê³¼ ìˆ˜ì§‘                                   â”‚
 - **ìž¬ì‹œë„ì‹œ: LLMìœ¼ë¡œ ìƒˆ ê´€ì  ì¿¼ë¦¬ ìƒì„± + ê¸°ì¡´ ê²°ê³¼ì™€ ë³‘í•©**                  â”‚
     â”‚                                                              â”‚
     â–¼                                                              â”‚
[ðŸ“š ë¬¸ì„œ ìš”ì•½ ì—ì´ì „íŠ¸]                                                   â”‚
 - ìˆ˜ì§‘ëœ ë¬¸ì„œë¥¼ ê°ê° ìš”ì•½                                               â”‚
 - í•µì‹¬ ì •ë³´ë§Œ ì¶”ì¶œ                                                    â”‚
     â”‚                                                              â”‚
     â–¼                                                              â”‚
[ðŸ§  ì¸ì‚¬ì´íŠ¸ ì—ì´ì „íŠ¸]                                                    â”‚
 - ìš”ì•½ëœ ë¬¸ì„œë“¤ë¡œë¶€í„° ì¸ì‚¬ì´íŠ¸(ì‹œì‚¬ì , í•µì‹¬ ë…¼ì ) ë„ì¶œ                          â”‚
     â”‚                                                              â”‚
     â–¼                                                              â”‚
[ðŸ§© ì‘ë‹µ ìƒì„± ì—ì´ì „íŠ¸]                                                   â”‚
 - ì „ì²´ ë‚´ìš©ì„ ë§ˆí¬ë‹¤ìš´ êµ¬ì¡°ë¡œ ì •ë¦¬                                         â”‚
 - ê° ë¬¸ìž¥ ì˜†ì— ì¶œì²˜ í¬í•¨                                               â”‚
     â”‚                                                              â”‚
     â–¼                                                              â”‚
[âœ… ê²€ì¦ ì—ì´ì „íŠ¸] **ê°•í™”ë¨**                                             â”‚
 - ìµœì¢… ì‘ë‹µì„ ê²€í†  (ë…¼ë¦¬ ì˜¤ë¥˜, ì¶œì²˜ ëˆ„ë½, ì •ë³´ ë¶€ì¡± ë“±)                       â”‚
     â”œâ”€â”€ ë¬¸ì œê°€ ì—†ìœ¼ë©´ â†’ [ìµœì¢… ì¶œë ¥]                                      â”‚
     â””â”€â”€ ë¬¸ì œê°€ ìžˆê³  ìž¬ì‹œë„ ê°€ëŠ¥í•˜ë©´ â†’ **ìƒˆë¡œìš´ ê´€ì  ì¿¼ë¦¬ ìƒì„± ìš”ì²­** â”€ â”€ â”€ â”€ â”€ â”˜
         (ê²€ì¦ í”¼ë“œë°±ì„ ì›¹ ê²€ìƒ‰ ì—ì´ì „íŠ¸ì— ì „ë‹¬)
```

---

## 6. ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

| ì˜ì—­            | ê¸°ìˆ                                                                                                                                      |
| ------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| ë©€í‹° ì—ì´ì „íŠ¸ í”„ë ˆìž„ì›Œí¬ | LangChain + LangGraph                                                                                                                  |
| ê²€ìƒ‰ API        | DuckDuckGo, Tavily                                                                                                                     |
| LLM ë° ìž„ë² ë”©     | GPT ê³„ì—´(GPT-4o, GPT-4o-mini, text-embedding-3-large) ë˜ëŠ” Gemini ê³„ì—´(Gemini 2.5 Flash, Gemini 2.5 Pro, gemini-embedding-001) ì¤‘ í†µì¼ ì‚¬ìš© |
| ë²¡í„° DB         | Chroma                                                                                                                                 |
| ì¸í„°íŽ˜ì´ìŠ¤         | Streamlit                                                                                                                              |
| í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬      | `.env` íŒŒì¼ ê¸°ë°˜ êµ¬ì„± (API í‚¤, LLM ì¢…ë¥˜ ë“±)                                                                                                      |
| ì‹¤í–‰ í™˜ê²½         | Python ê°€ìƒí™˜ê²½ (venv ë˜ëŠ” poetry ë“±)ì—ì„œ ë¡œì»¬ ì‹¤í–‰                                                                                                 |
| ëª¨ë‹ˆí„°ë§          | LangSmith (ì„¤ì •ë§Œ ì ìš©, ì‚¬ìš©ìžëŠ” ì§ì ‘ í™•ì¸)                                                                                                         |

---

## 7. MVP ë²”ìœ„ (Minimum Viable Product)

1. ì§ˆë¬¸ ë¶„ì„ â†’ í•˜ìœ„ ì¿¼ë¦¬ ìžë™ ìƒì„±
2. ë³‘ë ¬ ê²€ìƒ‰ â†’ ë‰´ìŠ¤ ë° ë¸”ë¡œê·¸ ì •ë³´ ìˆ˜ì§‘
3. ë¬¸ì„œ ìš”ì•½ â†’ ë§ˆí¬ë‹¤ìš´ êµ¬ì¡°í™” + ì¶œì²˜ í¬í•¨
4. **ìŠ¤ë§ˆíŠ¸ ê²€ì¦ + 1íšŒ ìž¬ê²€ìƒ‰ ì‹œìŠ¤í…œ** (**í•µì‹¬ ê¸°ëŠ¥**)
5. Streamlit UI ìµœì†Œ êµ¬ì„± + ì§„í–‰ ìƒíƒœ í‘œì‹œ (**ìž¬ê²€ìƒ‰ ìƒíƒœ í¬í•¨**)

---

## 8. **í•µì‹¬ ê°œì„ ì‚¬í•­ ìš”ì•½**

### ðŸŽ¯ **ìžë™ í’ˆì§ˆ ë³´ìž¥ ì‹œìŠ¤í…œ**
- **ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìžë™ ìž¬ê²€ìƒ‰**: ì‚¬ìš©ìž ê°œìž… ì—†ì´ í’ˆì§ˆ ë¬¸ì œ í•´ê²°
- **LLM ê¸°ë°˜ ì¿¼ë¦¬ ë‹¤ê°í™”**: ê¸°ì¡´ ê²€ìƒ‰ìœ¼ë¡œ ë¶€ì¡±í•œ ê´€ì ì„ ìžë™ ë³´ì™„
- **ê²°ê³¼ ë³‘í•© ë° ì¤‘ë³µ ì œê±°**: ê¸°ì¡´ + ìƒˆ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ í†µí•©

### ðŸ“Š **íš¨ìœ¨ì ì¸ ìž¬ì‹œë„ ì •ì±…**
- **ìµœëŒ€ 1íšŒ ìž¬ì‹œë„**: ë¬´í•œ ë£¨í”„ ë°©ì§€ ë° ì‘ë‹µ ì‹œê°„ ë³´ìž¥
- **êµ¬ì²´ì  í”¼ë“œë°± í™œìš©**: ë‹¨ìˆœ ìž¬ì‹œë„ê°€ ì•„ë‹Œ ëª©ì ì„± ìžˆëŠ” ì¶”ê°€ ê²€ìƒ‰
- **ì ì§„ì  ì •ë³´ ì¶•ì **: ê¸°ì¡´ ì •ë³´ë¥¼ ë²„ë¦¬ì§€ ì•Šê³  ë³´ì™„í•˜ëŠ” ë°©ì‹

### ðŸš€ **ì‚¬ìš©ìž ê²½í—˜ í–¥ìƒ**
- **íˆ¬ëª…í•œ ì§„í–‰ ìƒíƒœ**: ìž¬ê²€ìƒ‰ ê³¼ì •ì„ ì‚¬ìš©ìžì—ê²Œ ì‹¤ì‹œê°„ ê³µê°œ
- **ì•ˆì •ì ì¸ ê²°ê³¼ ì œê³µ**: ìž¬ê²€ìƒ‰ ì‹¤íŒ¨ ì‹œì—ë„ ê¸°ì¡´ ê²°ê³¼ë¡œ ì‘ë‹µ ë³´ìž¥
- **í’ˆì§ˆ ê¸°ë°˜ ìžë™ ìµœì í™”**: ìˆ˜ë™ ê°œìž… ì—†ì´ ê²°ê³¼ í’ˆì§ˆ ìžë™ í–¥ìƒ

---

## ðŸ”§ ê°œë°œ í™˜ê²½ ë©”ëª¨

- `.env` ì˜ˆì‹œ

  ```env
  LLM_PROVIDER=gpt
  OPENAI_API_KEY=sk-...
  GEMINI_API_KEY=...
  ```

- ì‹¤í–‰ ì˜ˆì‹œ (ê°€ìƒí™˜ê²½ ê¸°ì¤€)

  ```bash
  source venv/bin/activate
  streamlit run main.py
  ```

## 9. í‰ê°€ ì§€í‘œ ë° í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ðŸŽ¯ í‰ê°€ ì§€í‘œ (Evaluation Metrics)

| í•­ëª©          | ì„¤ëª…                               | ê¸°ì¤€                      |
| ----------- | -------------------------------- | ----------------------- |
| ì‘ë‹µ êµ¬ì¡°í™” ì™„ì„±ë„  | ë§ˆí¬ë‹¤ìš´ ì‘ë‹µì´ ëª…í™•í•œ êµ¬ì¡°ë¡œ ìž‘ì„±ë˜ì–´ ìžˆëŠ”ê°€        | ì œëª©/ì†Œì œëª©/ê¸€ë¨¸ë¦¬í‘œ ì¡´ìž¬ ì—¬ë¶€ë¡œ ì²´í¬   |
| ì¶œì²˜ ëª…í™•ì„±      | ê° ë¬¸ìž¥ ë˜ëŠ” ì¸ì‚¬ì´íŠ¸ì— ì¶œì²˜ê°€ ìž˜ ë‹¬ë ¤ ìžˆëŠ”ê°€       | ì¶œì²˜ ëˆ„ë½ ë¬¸ìž¥ 1ê°œ ì´í•˜           |
| ì¤‘ë³µ ì œê±° ì •í™•ë„   | ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ìœ ì‚¬ ë¬¸ì„œê°€ ì œê±°ë˜ì—ˆëŠ”ê°€           | ì¤‘ë³µ ë¬¸ì„œ 10% ì´í•˜            |
| ì¸ì‚¬ì´íŠ¸ í’ˆì§ˆ     | ë‹¨ìˆœ ìš”ì•½ì´ ì•„ë‹Œ ìƒˆë¡œìš´ ê´€ì°°/ì‹œì‚¬ì ì´ ìžˆëŠ”ê°€       | ì‚¬ëžŒ í‰ê°€ ë˜ëŠ” ì˜ˆì‹œ ë‹µì•ˆ ë¹„êµ       |
| **ìž¬ê²€ìƒ‰ íš¨ê³¼ì„±** | **ìž¬ê²€ìƒ‰ì„ í†µí•´ ì‘ë‹µ í’ˆì§ˆì´ ì‹¤ì œë¡œ í–¥ìƒë˜ì—ˆëŠ”ê°€**   | **ìž¬ê²€ìƒ‰ ì „í›„ í’ˆì§ˆ ì ìˆ˜ ë¹„êµ**     |
| **ì‹œìŠ¤í…œ ì•ˆì •ì„±** | **ìž¬ê²€ìƒ‰ ì‹¤íŒ¨ ì‹œì—ë„ ì•ˆì •ì ìœ¼ë¡œ ì‘ë‹µì„ ì œê³µí•˜ëŠ”ê°€** | **ì˜¤ë¥˜ ë°œìƒë¥  5% ì´í•˜**       |

### ðŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Test Scenarios)

1. **ê¸°ë³¸ ì‚¬ìš© íë¦„**
   - ìž…ë ¥: "ì˜¤í”ˆì†ŒìŠ¤ LLM íŠ¸ë Œë“œ ì•Œë ¤ì¤˜"
   - ê¸°ëŒ€: ì§ˆë¬¸ í™•ìž¥ â†’ ê²€ìƒ‰ â†’ ìš”ì•½ â†’ ì‘ë‹µ ìƒì„± â†’ ê²€ì¦ í†µê³¼ â†’ ìµœì¢… ì¶œë ¥

2. **ìž¬ê²€ìƒ‰ íŠ¸ë¦¬ê±° ì‹œë‚˜ë¦¬ì˜¤**
   - ìž…ë ¥: "ë¸”ë¡ì²´ì¸ì˜ ë¯¸ëž˜" (ì˜ë„ì ìœ¼ë¡œ ëª¨í˜¸í•œ ì§ˆë¬¸)
   - ê¸°ëŒ€: ì´ˆê¸° ê²€ìƒ‰ â†’ ê²€ì¦ ì‹¤íŒ¨ â†’ êµ¬ì²´ì  ê´€ì  ìž¬ê²€ìƒ‰ â†’ í’ˆì§ˆ í–¥ìƒëœ ì‘ë‹µ

3. **ìž¬ê²€ìƒ‰ í›„ ë³‘í•© í™•ì¸**
   - ê¸°ëŒ€: ê¸°ì¡´ ë¬¸ì„œ + ìƒˆ ë¬¸ì„œê°€ ì¤‘ë³µ ì—†ì´ ë³‘í•©ë¨
   - ê²€ì¦: ë¬¸ì„œ ìˆ˜ ì¦ê°€ ë° ë‚´ìš© ë‹¤ì–‘ì„± í™•ì¸

4. **ìž¬ê²€ìƒ‰ í•œê³„ í…ŒìŠ¤íŠ¸**
   - ìž…ë ¥: ë§¤ìš° íŠ¹ìˆ˜í•œ ì£¼ì œë¡œ ì •ë³´ê°€ ë¶€ì¡±í•œ ì§ˆë¬¸
   - ê¸°ëŒ€: 1íšŒ ìž¬ê²€ìƒ‰ í›„ ì‹¤íŒ¨í•´ë„ ê¸°ì¡´ ê²°ê³¼ë¡œ ì‘ë‹µ ì œê³µ

5. **ê²€ì¦ í’ˆì§ˆ í–¥ìƒ í™•ì¸**
   - ìž¬ê²€ìƒ‰ ì „í›„ ì‘ë‹µì„ ì¸ê°„ í‰ê°€ìžê°€ ë¹„êµ
   - ê¸°ëŒ€: ìž¬ê²€ìƒ‰ í›„ êµ¬ì²´ì„±, ì •í™•ì„±, ì™„ì„±ë„ í–¥ìƒ